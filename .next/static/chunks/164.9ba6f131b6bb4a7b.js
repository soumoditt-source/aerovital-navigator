"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{2489:function(e,t,n){n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6164:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s=n(7437),r=n(2265),i=n(2489),l=n(9763);let a=(0,l.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),o=(0,l.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var c=n(8614),d=n(5183),u=n(9541);function h(e){let{onQuery:t}=e,[n,l]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(null),{user:x}=(0,u.L)(),[y,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){let t=new e;t.continuous=!1,t.interimResults=!0,t.lang="en-US",w(t)}}},[]);let b=(0,r.useCallback)(e=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e),n=window.speechSynthesis.getVoices().find(e=>e.name.includes("Female")||e.name.includes("Samantha")||e.name.includes("Google US English"));n&&(t.voice=n),t.rate=1,t.pitch=1,window.speechSynthesis.speak(t)}},[]);(0,r.useEffect)(()=>{y&&(y.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;++n)e.results[n].isFinal?t+=e.results[n][0].transcript:p(e.results[n][0].transcript);t&&(p(t),g(t),l(!1))},y.onend=()=>{l(!1)},y.onerror=e=>{console.error("Speech error",e.error),l(!1)})},[y]);let g=e=>{let n=e.toLowerCase(),s="I didn't quite catch that. Could you say it again?";n.includes("safe")||n.includes("air")?s="Checking your location. The air quality is currently ".concat(Math.floor(100*Math.random()+50),". It is moderately safe to go outside."):n.includes("run")||n.includes("exercise")||n.includes("workout")?s="Based on the PM2.5 levels, I recommend an indoor workout today. I've prepared a HIIT session for you.":(n.includes("hello")||n.includes("hi"))&&(s="Hello ".concat((null==x?void 0:x.name)||"there","! I am AeroVital, your atmospheric health guardian. How can I help you breathe better today?")),m(s),b(s),t&&t(e)};return(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2",children:[(0,s.jsx)(c.M,{children:(h||f)&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"bg-white/90 backdrop-blur-md border border-white/40 shadow-xl rounded-2xl p-4 max-w-xs mb-2 text-slate-800",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider",children:"AeroVital AI"}),(0,s.jsx)("button",{onClick:()=>{p(""),m(null),window.speechSynthesis.cancel()},className:"text-slate-400 hover:text-slate-600",children:(0,s.jsx)(i.Z,{size:14})})]}),h&&(0,s.jsxs)("p",{className:"text-sm text-slate-500 italic mb-2",children:['"',h,'"']}),f&&(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)("div",{className:"w-1 bg-emerald-500 self-stretch rounded-full shrink-0"}),(0,s.jsx)("p",{className:"text-sm font-medium leading-relaxed",children:f})]})]})}),(0,s.jsxs)(d.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n?()=>{y&&(l(!1),y.stop())}:()=>{if(y){l(!0),p(""),m(null);try{y.start()}catch(e){console.error("Mic already active")}}else alert("Voice recognition not supported in this browser.")},className:"\n            h-16 w-16 rounded-full shadow-2xl flex items-center justify-center backdrop-blur-sm border-2\n            transition-all duration-300\n            ".concat(n?"bg-red-500/80 border-red-300 text-white animate-pulse":"bg-gradient-to-br from-emerald-500 to-teal-600 border-white/30 text-white","\n        "),children:[n?(0,s.jsx)(a,{size:28}):(0,s.jsx)(o,{size:28}),!n&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border border-white/20 animate-ping opacity-20"})]})]})}},8614:function(e,t,n){n.d(t,{M:function(){return y}});var s=n(7437),r=n(2265),i=n(8881),l=n(3576),a=n(4252),o=n(5750);class c extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:n}=e,i=(0,r.useId)(),l=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,r.useContext)(o._);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:r}=a.current;if(n||!l.current||!e||!t)return;l.current.dataset.motionPopId=i;let o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[n]),(0,s.jsx)(c,{isPresent:n,childRef:l,sizeRef:a,children:r.cloneElement(t,{ref:l})})}let u=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:o,custom:c,presenceAffectsLayout:u,mode:p}=e,f=(0,l.h)(h),m=(0,r.useId)(),x=(0,r.useCallback)(e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;o&&o()},[f,o]),y=(0,r.useMemo)(()=>({id:m,initial:n,isPresent:i,custom:c,onExitComplete:x,register:e=>(f.set(e,!1),()=>f.delete(e))}),u?[Math.random(),x]:[i,x]);return(0,r.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[i]),r.useEffect(()=>{i||f.size||!o||o()},[i]),"popLayout"===p&&(t=(0,s.jsx)(d,{isPresent:i,children:t})),(0,s.jsx)(a.O.Provider,{value:y,children:t})};function h(){return new Map}var p=n(9637);let f=e=>e.key||"";function m(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}var x=n(1534);let y=e=>{let{children:t,custom:n,initial:a=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:h=!1}=e,[y,w]=(0,p.oO)(h),b=(0,r.useMemo)(()=>m(t),[t]),g=h&&!y?[]:b.map(f),v=(0,r.useRef)(!0),k=(0,r.useRef)(b),j=(0,l.h)(()=>new Map),[M,S]=(0,r.useState)(b),[C,E]=(0,r.useState)(b);(0,x.L)(()=>{v.current=!1,k.current=b;for(let e=0;e<C.length;e++){let t=f(C[e]);g.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[C,g.length,g.join("-")]);let I=[];if(b!==M){let e=[...b];for(let t=0;t<C.length;t++){let n=C[t],s=f(n);g.includes(s)||(e.splice(t,0,n),I.push(n))}"wait"===d&&I.length&&(e=I),E(m(e)),S(b);return}let{forceRender:N}=(0,r.useContext)(i.p);return(0,s.jsx)(s.Fragment,{children:C.map(e=>{let t=f(e),r=(!h||!!y)&&(b===C||g.includes(t));return(0,s.jsx)(u,{isPresent:r,initial:(!v.current||!!a)&&void 0,custom:r?void 0:n,presenceAffectsLayout:c,mode:d,onExitComplete:r?void 0:()=>{if(!j.has(t))return;j.set(t,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==N||N(),E(k.current),h&&(null==w||w()),o&&o())},children:e},t)})})}}}]);