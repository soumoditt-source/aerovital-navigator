(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{2827:function(){!function(){"use strict";function t(e){return this instanceof t?(this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new t(e)}t.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,e){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=e||15;var n=this._circle=document.createElement("canvas"),a=n.getContext("2d"),i=this._r=t+e;return n.width=n.height=2*i,a.shadowOffsetX=a.shadowOffsetY=200,a.shadowBlur=e,a.shadowColor="black",a.beginPath(),a.arc(i-200,i-200,t,0,2*Math.PI,!0),a.closePath(),a.fill(),this},gradient:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),a=n.createLinearGradient(0,0,0,256);for(var i in e.width=1,e.height=256,t)a.addColorStop(i,t[i]);return n.fillStyle=a,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var n,a=0,i=this._data.length;i>a;a++)n=this._data[a],e.globalAlpha=Math.max(n[2]/this._max,t||.05),e.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var r=e.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),e.putImageData(r,0,0),this},_colorize:function(t,e){for(var n,a=3,i=t.length;i>a;a+=4)(n=4*t[a])&&(t[a-3]=e[n],t[a-2]=e[n+1],t[a-1]=e[n+2])}},window.simpleheat=t}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){this._latlngs=t,L.setOptions(this,e)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var n=this._map.getSize();t.width=n.x,t.height=n.y;var a=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(a?"animated":"hide")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var t,e,n,a,i,r,o,s,l,u=[],c=this._heat._r,h=this._map.getSize(),d=new L.Bounds(L.point([-c,-c]),h.add([c,c])),f=void 0===this.options.max?1:this.options.max,p=1/Math.pow(2,Math.max(0,Math.min((void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom)-this._map.getZoom(),12))),m=c/2,g=[],x=this._map._getMapPanePos(),_=x.x%m,v=x.y%m;for(t=0,e=this._latlngs.length;e>t;t++)n=this._map.latLngToContainerPoint(this._latlngs[t]),d.contains(n)&&(i=Math.floor((n.x-_)/m)+2,r=Math.floor((n.y-v)/m)+2,l=(void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1)*p,g[r]=g[r]||[],(a=g[r][i])?(a[0]=(a[0]*a[2]+n.x*l)/(a[2]+l),a[1]=(a[1]*a[2]+n.y*l)/(a[2]+l),a[2]+=l):g[r][i]=[n.x,n.y,l]);for(t=0,e=g.length;e>t;t++)if(g[t])for(o=0,s=g[t].length;s>o;o++)(a=g[t][o])&&u.push([Math.round(a[0]),Math.round(a[1]),Math.min(a[2],f)]);this._heat.data(u).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+" scale("+e+")"}}),L.heatLayer=function(t,e){return new L.HeatLayer(t,e)}},6653:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return H}});var a,i,r,o,s,l,u,c=n(7437),h=n(2265);function d(t,e){return Object.freeze({...t,...e})}let f=(0,h.createContext)(null),p=f.Provider;function m(){let t=(0,h.useContext)(f);if(null==t)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function g(){return m().map}var x=n(759),_=n.n(x);function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}let y=(0,h.forwardRef)(function({bounds:t,boundsOptions:e,center:n,children:a,className:i,id:r,placeholder:o,style:s,whenReady:l,zoom:u,...c},d){let[f]=(0,h.useState)({className:i,id:r,style:s}),[m,g]=(0,h.useState)(null);(0,h.useImperativeHandle)(d,()=>m?.map??null,[m]);let _=(0,h.useCallback)(a=>{if(null!==a&&null===m){let i=new x.Map(a,c);null!=n&&null!=u?i.setView(n,u):null!=t&&i.fitBounds(t,e),null!=l&&i.whenReady(l),g(Object.freeze({__version:1,map:i}))}},[]);(0,h.useEffect)(()=>()=>{m?.map.remove()},[m]);let y=m?h.createElement(p,{value:m},a):o??null;return h.createElement("div",v({},f,{ref:_}),y)});function w(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function b(t,e){return null==e?function(e,n){let a=(0,h.useRef)();return a.current||(a.current=t(e,n)),a}:function(n,a){let i=(0,h.useRef)();i.current||(i.current=t(n,a));let r=(0,h.useRef)(n),{instance:o}=i.current;return(0,h.useEffect)(function(){r.current!==n&&(e(o,n,r.current),r.current=n)},[o,n,a]),i}}var j=n(4887);function C(t){return(0,h.forwardRef)(function(e,n){let{instance:a,context:i}=t(e).current;return(0,h.useImperativeHandle)(n,()=>a),null==e.children?null:h.createElement(p,{value:i},e.children)})}let O=C((a=b(function({children:t,...e},n){let a=new x.Control.Layers(void 0,void 0,e);return w(a,d(n,{layersControl:a}))},function(t,e,n){e.collapsed!==n.collapsed&&(!0===e.collapsed?t.collapse():t.expand())}),function(t){let e=m(),n=a(t,e),{instance:i}=n.current,r=(0,h.useRef)(t.position),{position:o}=t;return(0,h.useEffect)(function(){return i.addTo(e.map),function(){i.remove()}},[e.map,i]),(0,h.useEffect)(function(){null!=o&&o!==r.current&&(i.setPosition(o),r.current=o)},[i,o]),n}));function z(t){return function(e){let n=m(),a=(0,h.useRef)(e),[i,r]=(0,h.useState)(null),{layersControl:o,map:s}=n,l=(0,h.useCallback)(e=>{null!=o&&(a.current.checked&&s.addLayer(e),t(o,e,a.current.name),r(e))},[o,s]),u=(0,h.useCallback)(t=>{o?.removeLayer(t),r(null)},[o]),c=(0,h.useMemo)(()=>d(n,{layerContainer:{addLayer:l,removeLayer:u}}),[n,l,u]);return(0,h.useEffect)(()=>{null!==i&&a.current!==e&&(!0===e.checked&&(null==a.current.checked||!1===a.current.checked)?s.addLayer(i):!0===a.current.checked&&(null==e.checked||!1===e.checked)&&s.removeLayer(i),a.current=e)}),e.children?h.createElement(p,{value:c},e.children):null}}function k(t,e){let n=(0,h.useRef)(e);(0,h.useEffect)(function(){e!==n.current&&null!=t.attributionControl&&(null!=n.current&&t.attributionControl.removeAttribution(n.current),null!=e&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function E(t,e){let n=(0,h.useRef)();(0,h.useEffect)(function(){return null!=e&&t.instance.on(e),n.current=e,function(){null!=n.current&&t.instance.off(n.current),n.current=null}},[t,e])}function I(t,e){let n=t.pane??e.pane;return n?{...t,pane:n}:t}function N(t,e){(0,h.useEffect)(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function P(t){return function(e){let n=m(),a=t(I(e,n),n);return k(n.map,e.attribution),E(a.current,e.eventHandlers),N(a.current,n),a}}O.BaseLayer=z(function(t,e,n){t.addBaseLayer(e,n)}),O.Overlay=z(function(t,e,n){t.addOverlay(e,n)});let M=(i=P(b(function({url:t,...e},n){return w(new x.TileLayer(t,I(e,n)),n)},function(t,e,n){!function(t,e,n){let{opacity:a,zIndex:i}=e;null!=a&&a!==n.opacity&&t.setOpacity(a),null!=i&&i!==n.zIndex&&t.setZIndex(i)}(t,e,n);let{url:a}=e;null!=a&&a!==n.url&&t.setUrl(a)})),(0,h.forwardRef)(function(t,e){let{instance:n}=i(t).current;return(0,h.useImperativeHandle)(e,()=>n),null})),R=C(P(b(function({position:t,...e},n){let a=new x.Marker(t,e);return w(a,d(n,{overlayContainer:a}))},function(t,e,n){e.position!==n.position&&t.setLatLng(e.position),null!=e.icon&&e.icon!==n.icon&&t.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),null!=t.dragging&&e.draggable!==n.draggable&&(!0===e.draggable?t.dragging.enable():t.dragging.disable())}))),S=(r=function(t,e){return w(new x.Popup(t,e.overlayContainer),e)},o=function(t,e,{position:n},a){(0,h.useEffect)(function(){let{instance:i}=t;function r(t){t.popup===i&&(i.update(),a(!0))}function o(t){t.popup===i&&a(!1)}return e.map.on({popupopen:r,popupclose:o}),null==e.overlayContainer?(null!=n&&i.setLatLng(n),i.openOn(e.map)):e.overlayContainer.bindPopup(i),function(){e.map.off({popupopen:r,popupclose:o}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(i)}},[t,e,a,n])},s=b(r),l=function(t,e){let n=m(),a=s(I(t,n),n);return k(n.map,t.attribution),E(a.current,t.eventHandlers),o(a.current,n,t,e),a},(0,h.forwardRef)(function(t,e){let[n,a]=(0,h.useState)(!1),{instance:i}=l(t,a).current;(0,h.useImperativeHandle)(e,()=>i),(0,h.useEffect)(function(){n&&i.update()},[i,n,t.children]);let r=i._contentNode;return r?(0,j.createPortal)(t.children,r):null})),T=C((u=b(function({positions:t,...e},n){let a=new x.Polyline(t,e);return w(a,d(n,{overlayContainer:a}))},function(t,e,n){e.positions!==n.positions&&t.setLatLngs(e.positions)}),function(t){let e=m(),n=u(I(t,e),e);return E(n.current,t.eventHandlers),N(n.current,e),function(t,e){let n=(0,h.useRef)();(0,h.useEffect)(function(){if(e.pathOptions!==n.current){let a=e.pathOptions??{};t.instance.setStyle(a),n.current=a}},[t,e])}(n.current,t),n}));n(5046),n(2827);let U=()=>{void 0!==globalThis.window&&(delete _().Icon.Default.prototype._getIconUrl,_().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}))};function A(){let t=g();return(0,h.useEffect)(()=>{U(),[100,500,2e3].forEach(e=>{setTimeout(()=>{t.invalidateSize(),globalThis.window&&globalThis.window.dispatchEvent(new Event("resize"))},e)})},[t]),null}function D(t){let{aqi:e,center:n}=t,a=g();return(0,h.useEffect)(()=>{if(!a||0===e)return;let t=[],i=e/100;for(let e=0;e<40;e++){let e=(Math.random()-.5)*.05,a=(Math.random()-.5)*.05;t.push([n[0]+e,n[1]+a,i*Math.random()])}let r=_().heatLayer(t,{radius:35,blur:25,maxZoom:17,gradient:{.2:"#10b981",.4:"#fbbf24",.6:"#f97316",.8:"#ef4444",1:"#7f1d1d"}}).addTo(a);return()=>{a.removeLayer(r)}},[a,e,n]),null}function Z(t){let{center:e}=t,n=g();return(0,h.useEffect)(()=>{e&&e[0]&&e[1]&&n.panTo(e,{animate:!0})},[e,n]),null}function B(t){let{onClick:e}=t;return!function(t){let e=g();(0,h.useEffect)(function(){return e.on(t),function(){e.off(t)}},[e,t])}({click(t){e(t.latlng.lat,t.latlng.lng)}}),null}function H(t){let{onStartSet:e,onEndSet:n,activeSelection:a,center:i=[20.5937,78.9629],routePoints:r={start:null,end:null},aqi:o=0}=t,[s,l]=(0,h.useState)(!1),u=(0,h.useMemo)(()=>void 0===globalThis.window?{start:null,end:null}:{start:new(_()).Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41]}),end:new(_()).Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41]})},[]);if((0,h.useEffect)(()=>{l(!0)},[]),!s)return(0,c.jsx)("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center border border-white/10 rounded-3xl overflow-hidden",children:(0,c.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,c.jsx)("p",{className:"text-[10px] text-blue-400 font-mono tracking-widest uppercase",children:"Initializing Geospatial Engine..."})]})});let d=[];return r.start&&d.push(r.start),r.end&&d.push(r.end),(0,c.jsx)("div",{className:"w-full h-full relative outline-none bg-slate-950 overflow-hidden rounded-3xl",children:(0,c.jsxs)(y,{center:i,zoom:13,scrollWheelZoom:!0,className:"w-full h-full min-h-[500px]",zoomControl:!1,children:[(0,c.jsx)(A,{}),(0,c.jsx)(Z,{center:i}),(0,c.jsx)(B,{onClick:(t,i)=>{"start"===a?e(t,i):"end"===a&&n(t,i)}}),(0,c.jsx)(D,{aqi:o,center:i}),(0,c.jsxs)(O,{position:"topright",children:[(0,c.jsx)(O.BaseLayer,{checked:!0,name:"Google Satellite (Hybrid)",children:(0,c.jsx)(M,{attribution:"\xa9 Google",url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",maxZoom:20})}),(0,c.jsx)(O.BaseLayer,{name:"Google Street View",children:(0,c.jsx)(M,{attribution:"\xa9 Google",url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",maxZoom:20})}),(0,c.jsx)(O.BaseLayer,{name:"Deep Space Monitor",children:(0,c.jsx)(M,{attribution:"\xa9 CARTO",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"})})]}),r.start&&u.start&&(0,c.jsx)(R,{position:r.start,icon:u.start,children:(0,c.jsx)(S,{children:(0,c.jsx)("div",{className:"font-mono text-[10px] uppercase font-bold text-green-500",children:"Origin Point"})})}),r.end&&u.end&&(0,c.jsx)(R,{position:r.end,icon:u.end,children:(0,c.jsx)(S,{children:(0,c.jsx)("div",{className:"font-mono text-[10px] uppercase font-bold text-red-500",children:"Destination"})})}),2===d.length&&(0,c.jsx)(T,{positions:d,pathOptions:{color:"#3b82f6",weight:8,opacity:.9,dashArray:"1, 15",lineCap:"round",className:"neural-path-pulse"},children:(0,c.jsx)(S,{children:(0,c.jsx)("div",{className:"font-mono text-[10px] text-blue-400 font-bold uppercase tracking-tighter",children:"Neural A* Intelligence Path"})})}),(0,c.jsxs)("div",{className:"absolute bottom-6 left-6 z-[1000] glass-panel p-3 rounded-xl border border-white/10 pointer-events-none",children:[(0,c.jsx)("div",{className:"text-[9px] font-black uppercase tracking-widest text-white/40 mb-2",children:"Neural Intensity Index"}),(0,c.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#10b981]",title:"Good"}),(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#fbbf24]",title:"Moderate"}),(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#f97316]",title:"Unhealthy for Sensitive"}),(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#ef4444]",title:"Unhealthy"}),(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-[#7f1d1d]",title:"Hazardous"}),(0,c.jsx)("span",{className:"text-[8px] font-mono text-white/30 ml-1",children:"CLEAN â†’ TOXIC"})]})]})]})})}},5046:function(){}}]);