"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{7609:function(e,t,n){n.d(t,{default:function(){return b}});var a=n(7437),o=n(2265),i=n(5183),s=n(8614),r=n(3417),l=n(2222),c=n(2489),d=n(875),u=n(2369),h=n(2023),m=n(4743),p=n(6287),x=n(9541),f=n(8031),g=n(9064),y=n(257);let v={pathway:{name:"Pathway RAG",icon:"\uD83D\uDD2E",color:"blue",description:"Real-time streaming AI"},gemini:{name:"Gemini Pro",icon:"✨",color:"purple",description:"Google AI (Free)"},groq:{name:"Groq LLaMA",icon:"⚡",color:"green",description:"Ultra-fast inference"},local:{name:"Local AI",icon:"\uD83E\uDDE0",color:"orange",description:"Offline mode"}};function b(){let[e,t]=(0,o.useState)(!1),[n,y]=(0,o.useState)(""),[b,I]=(0,o.useState)([{role:"assistant",content:"Hello! I am your AeroVital Intelligence Assistant powered by multiple AI models. How can I help you navigate today's atmospheric conditions?",model:"pathway"}]),[C,E]=(0,o.useState)(!1),[k,D]=(0,o.useState)("pathway"),[P,S]=(0,o.useState)(!1),T=(0,o.useRef)(null),{user:U}=(0,x.L)(),{aqi:q,temperature:O,pm25:M,humidity:G}=(0,f.M)();(0,o.useEffect)(()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},[b,C]);let _=async()=>{if(n.trim()){y(""),I(e=>[...e,{role:"user",content:n}]),E(!0);try{let e="",t=null==U?void 0:U.medicalConditions,a={user:(null==U?void 0:U.name)||"Unknown",age:(null==U?void 0:U.age)||"N/A",aqi:q,pm25:M,temperature:O,humidity:G,healthConditions:t?[t.cardiovascular?"Cardiovascular":"",t.respiratory?"Respiratory":"",t.metabolic?"Metabolic":"",...t.specificConditions||[]].filter(Boolean):[],query:n};switch(k){case"pathway":e=await w(a);break;case"gemini":e=await j(a);break;case"groq":e=await N(a);break;case"local":e=A(a)}I(t=>[...t,{role:"assistant",content:e,model:k}]),E(!1)}catch(t){console.error("Chat error:",t);let e={aqi:q,pm25:M,temperature:O,humidity:G,query:n};I(t=>[...t,{role:"assistant",content:"⚠️ ".concat(v[k].name," is unavailable. Switching to local mode...\n\n").concat(A(e)),model:"local"}]),E(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!0),className:"fixed bottom-24 right-6 z-[60] h-14 w-14 rounded-full bg-blue-600 text-white shadow-2xl flex items-center justify-center border border-white/20",children:[(0,a.jsx)(r.Z,{size:24}),(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-slate-900 animate-pulse"})]}),(0,a.jsx)(s.M,{children:e&&(0,a.jsx)(i.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed bottom-24 right-6 z-[100] w-[90vw] max-w-[400px] h-[600px] max-h-[70vh] flex flex-col",children:(0,a.jsxs)(p.Z,{className:"h-full flex flex-col p-0 overflow-hidden border-blue-500/20 shadow-blue-500/10",children:[(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-indigo-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white/10 rounded-lg",children:(0,a.jsx)(l.Z,{size:20,className:"text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-sm",children:"AeroVital Intel"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-[10px] text-white/70 uppercase tracking-tighter",children:"Neural Link Active"})]})]})]}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,a.jsx)(c.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>S(!P),className:"w-full bg-white/10 hover:bg-white/20 rounded-lg px-3 py-2 flex items-center justify-between transition-colors",children:[(0,a.jsxs)("span",{className:"text-xs flex items-center gap-2",children:[(0,a.jsx)("span",{children:v[k].icon}),(0,a.jsx)("span",{className:"font-semibold",children:v[k].name})]}),(0,a.jsx)(d.Z,{size:14,className:"transition-transform ".concat(P?"rotate-180":"")})]}),(0,a.jsx)(s.M,{children:P&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-white/10 rounded-lg overflow-hidden z-10",children:Object.keys(v).map(e=>(0,a.jsx)("button",{onClick:()=>{D(e),S(!1),g.ZP.success("Switched to ".concat(v[e].name))},className:"w-full px-3 py-2 text-left hover:bg-white/10 transition-colors ".concat(k===e?"bg-white/5":""),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:v[e].icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-white",children:v[e].name}),(0,a.jsx)("div",{className:"text-[10px] text-white/50",children:v[e].description})]})]})},e))})})]})]}),(0,a.jsxs)("div",{ref:T,className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-black/20",children:[b.map((e,t)=>{var n,o;return(0,a.jsx)(i.E.div,{initial:{opacity:0,x:"user"===e.role?10:-10},animate:{opacity:1,x:0},className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"flex gap-2 max-w-[85%] ".concat("user"===e.role?"flex-row-reverse":""),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0 border ".concat("user"===e.role?"bg-indigo-600 border-indigo-400":"bg-slate-800 border-white/10"),children:"user"===e.role?(0,a.jsx)(u.Z,{size:14}):(0,a.jsx)(l.Z,{size:14})}),(0,a.jsxs)("div",{className:"p-3 rounded-2xl text-sm ".concat("user"===e.role?"bg-blue-600 text-white rounded-tr-none":"bg-white/5 border border-white/10 text-white/90 rounded-tl-none"),children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.model&&"assistant"===e.role&&(0,a.jsxs)("div",{className:"text-[9px] text-white/30 mt-1 flex items-center gap-1",children:[(0,a.jsx)("span",{children:null===(n=v[e.model])||void 0===n?void 0:n.icon}),(0,a.jsx)("span",{children:null===(o=v[e.model])||void 0===o?void 0:o.name})]})]})]})},"".concat(t,"-").concat(e.role))}),C&&(0,a.jsxs)("div",{className:"flex justify-start gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-800 border border-white/10 flex items-center justify-center",children:(0,a.jsx)(h.Z,{size:14,className:"animate-spin text-blue-400"})}),(0,a.jsxs)("div",{className:"p-3 bg-white/5 border border-white/10 rounded-2xl rounded-tl-none flex gap-1",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-white/30 rounded-full animate-bounce"}),(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-white/30 rounded-full animate-bounce [animation-delay:0.2s]"}),(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-white/30 rounded-full animate-bounce [animation-delay:0.4s]"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white/5 border-t border-white/10",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:n,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},placeholder:"Ask about AQI, exercise, or health...",className:"w-full bg-white/5 border border-white/10 rounded-xl py-3 pl-4 pr-12 text-sm focus:outline-none focus:border-blue-500/50 transition-colors"}),(0,a.jsx)("button",{onClick:_,disabled:!n.trim()||C,className:"absolute right-2 top-1.5 p-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:hover:bg-blue-600 text-white rounded-lg transition-colors",children:(0,a.jsx)(m.Z,{size:16})})]}),(0,a.jsx)("p",{className:"text-[10px] text-white/30 text-center mt-2 font-mono italic",children:"MULTI-MODEL AI • PATHWAY RAG • GEMINI • GROQ"})]})]})})})]})}async function w(e){try{var t,a;let{queryPathwayIntel:o}=await n.e(945).then(n.bind(n,945)),i=await o(e.query,e);if(i.success&&(i.response||i.message))return i.response||i.message;let s=await fetch(y.env.NEXT_PUBLIC_PATHWAY_API_URL||"http://localhost:8001",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e.query,user_context:"User: ".concat(e.user,", Age: ").concat(e.age,", AQI: ").concat(e.aqi,", PM2.5: ").concat(e.pm25,", Temp: ").concat(e.temperature,"\xb0C")}),signal:(null===(t=(a=AbortSignal).timeout)||void 0===t?void 0:t.call(a,1e4))||null});if(!s.ok)throw Error("Pathway API error");let r=await s.json();return r.response||r.message||A(e)}catch(t){return console.error("Pathway API failed:",t),A(e)}}async function j(e){try{var t,n,a,o,i,s,r;let l=y.env.NEXT_PUBLIC_GEMINI_API_KEY||"demo",c="You are AeroVital AI, an atmospheric health assistant. \n        \nCurrent Conditions:\n- AQI: ".concat(e.aqi,"\n- PM2.5: ").concat(e.pm25," \xb5g/m\xb3\n- Temperature: ").concat(e.temperature,"\xb0C\n- Humidity: ").concat(e.humidity,"%\n\nUser: ").concat(e.user,", Age: ").concat(e.age,"\nHealth Conditions: ").concat(e.healthConditions.join(", ")||"None","\n\nUser Question: ").concat(e.query,"\n\nProvide a helpful, concise response focused on health and safety."),d=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=".concat(l),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:c}]}]}),signal:(null===(t=(n=AbortSignal).timeout)||void 0===t?void 0:t.call(n,15e3))||null});if(!d.ok)throw Error("Gemini API error");let u=await d.json();return(null===(r=u.candidates)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:null===(i=s.content)||void 0===i?void 0:null===(o=i.parts)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.text)||A(e)}catch(e){throw console.error("Gemini API failed:",e),e}}async function N(e){try{var t,n,a,o,i;let s=y.env.NEXT_PUBLIC_GROQ_API_KEY;if(!s)throw Error("Groq API key not configured");let r=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-8b-8192",messages:[{role:"system",content:"You are AeroVital AI. Current AQI: ".concat(e.aqi,", PM2.5: ").concat(e.pm25,", Temp: ").concat(e.temperature,"\xb0C. User: ").concat(e.user,", Age: ").concat(e.age,".")},{role:"user",content:e.query}],max_tokens:300,temperature:.7}),signal:(null===(t=(n=AbortSignal).timeout)||void 0===t?void 0:t.call(n,1e4))||null});if(!r.ok)throw Error("Groq API error");let l=await r.json();return(null===(i=l.choices)||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:null===(a=o.message)||void 0===a?void 0:a.content)||A(e)}catch(e){throw console.error("Groq API failed:",e),e}}function A(e){let{aqi:t,pm25:n,temperature:a,query:o}=e,i=o.toLowerCase();return i.includes("safe")||i.includes("outside")||i.includes("run")||i.includes("exercise")?t>200?"⚠️ **UNSAFE CONDITIONS**\n\nAQI is ".concat(t," (Very Unhealthy). I strongly recommend:\n• Stay indoors\n• Keep windows closed\n• Use air purifiers\n• Avoid all outdoor activities\n• Wear N95 mask if you must go out"):t>150?"⚠️ **CAUTION ADVISED**\n\nAQI is ".concat(t," (Unhealthy). Recommendations:\n• Limit outdoor time\n• Avoid strenuous exercise\n• Sensitive groups should stay indoors\n• Consider wearing a mask"):t>100?"✅ **MODERATE CONDITIONS**\n\nAQI is ".concat(t,". It's relatively safe, but:\n• Sensitive individuals should limit prolonged outdoor exertion\n• Light exercise is okay\n• Monitor for symptoms"):"✅ **GOOD CONDITIONS**\n\nAQI is ".concat(t," - excellent! You can:\n• Exercise outdoors safely\n• Enjoy outdoor activities\n• No special precautions needed"):i.includes("aqi")||i.includes("air quality")?"\uD83D\uDCCA **Current Air Quality**\n\n• AQI: ".concat(t,"\n• PM2.5: ").concat(n," \xb5g/m\xb3\n• Temperature: ").concat(a,"\xb0C\n\nStatus: ").concat(t<=50?"Good":t<=100?"Moderate":t<=150?"Unhealthy for Sensitive Groups":t<=200?"Unhealthy":"Very Unhealthy"):i.includes("health")||i.includes("symptoms")?"\uD83C\uDFE5 **Health Guidance**\n\nWith current AQI of ".concat(t,":\n\n").concat(t>150?"• Watch for: coughing, throat irritation, breathing difficulty\n• Keep rescue medications handy\n• Consult doctor if symptoms worsen":"• No immediate health concerns\n• Stay hydrated\n• Monitor air quality changes"):"I'm your AeroVital AI assistant. Current conditions:\n\n\uD83D\uDCCA AQI: ".concat(t,"\n\uD83D\uDCA8 PM2.5: ").concat(n," \xb5g/m\xb3\n\uD83C\uDF21️ Temp: ").concat(a,"\xb0C\n\nHow can I help you stay safe today?")}},6287:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(7437),o=n(5183),i=n(1994),s=n(3335);function r(e){let{children:t,className:n,onClick:r,hoverEffect:l=!0}=e;return(0,a.jsxs)(o.E.div,{whileHover:l?{scale:1.02,y:-5}:{},whileTap:l?{scale:.98}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,type:"spring"},className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,i.W)(t))}("glass-card p-6 relative overflow-hidden group",n),onClick:r,children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),(0,a.jsx)("div",{className:"relative z-10",children:t})]})}},8031:function(e,t,n){n.d(t,{M:function(){return a}});let a=(0,n(9625).Ue)(e=>({aqi:0,pm25:0,temperature:0,humidity:0,loading:!0,setReadings:t=>e({...t,loading:!1}),setLoading:t=>e({loading:t})}))},9541:function(e,t,n){n.d(t,{L:function(){return i}});var a=n(9625),o=n(6885);let i=(0,a.Ue)()((0,o.tJ)(e=>({user:null,setUser:t=>e({user:t}),clearUser:()=>e({user:null})}),{name:"aerovital-user"}))}}]);