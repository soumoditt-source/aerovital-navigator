"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{6164:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),l=s(2265),i=s(2489),n=s(9763);let r=(0,n.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),o=(0,n.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var c=s(8614),d=s(5183),h=s(9541);function u(e){let{onQuery:t}=e,[s,n]=(0,l.useState)(!1),[u,x]=(0,l.useState)(""),[p,m]=(0,l.useState)(null),{user:b}=(0,h.L)(),[y,f]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(void 0!==globalThis.window){let e=globalThis.window.SpeechRecognition||globalThis.window.webkitSpeechRecognition;if(e){let t=new e;t.continuous=!1,t.interimResults=!0,t.lang="en-US",f(t)}}},[]);let g=(0,l.useCallback)(e=>{if("speechSynthesis"in globalThis){globalThis.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e),s=globalThis.speechSynthesis.getVoices().find(e=>e.name.includes("Female")||e.name.includes("Samantha")||e.name.includes("Google US English"));s&&(t.voice=s),t.rate=1,t.pitch=1,globalThis.speechSynthesis.speak(t)}},[]);(0,l.useEffect)(()=>{y&&(y.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;++s)e.results[s].isFinal?t+=e.results[s][0].transcript:x(e.results[s][0].transcript);t&&(x(t),w(t),n(!1))},y.onend=()=>{n(!1)},y.onerror=e=>{console.error("Speech error",e.error),n(!1)})},[y]);let w=e=>{let s=e.toLowerCase(),a="I didn't quite catch that. Could you say it again?";s.includes("safe")||s.includes("air")?a="Checking your location. The air quality is currently ".concat(Math.floor(100*Math.random()+50),". It is moderately safe to go outside."):s.includes("run")||s.includes("exercise")||s.includes("workout")?a="Based on the PM2.5 levels, I recommend an indoor workout today. I've prepared a HIIT session for you.":(s.includes("hello")||s.includes("hi"))&&(a="Hello ".concat((null==b?void 0:b.name)||"there","! I am AeroVital, your atmospheric health guardian. How can I help you breathe better today?")),m(a),g(a),t&&t(e)};return(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2",children:[(0,a.jsx)(c.M,{children:(u||p)&&(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"bg-white/90 backdrop-blur-md border border-white/40 shadow-xl rounded-2xl p-4 max-w-xs mb-2 text-slate-800",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider",children:"AeroVital AI"}),(0,a.jsx)("button",{onClick:()=>{x(""),m(null),globalThis.speechSynthesis.cancel()},className:"text-slate-400 hover:text-slate-600",children:(0,a.jsx)(i.Z,{size:14})})]}),u&&(0,a.jsxs)("p",{className:"text-sm text-slate-500 italic mb-2",children:['"',u,'"']}),p&&(0,a.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,a.jsx)("div",{className:"w-1 bg-emerald-500 self-stretch rounded-full shrink-0"}),(0,a.jsx)("p",{className:"text-sm font-medium leading-relaxed",children:p})]})]})}),(0,a.jsxs)(d.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s?()=>{y&&(n(!1),y.stop())}:()=>{if(y){n(!0),x(""),m(null);try{y.start()}catch(e){"InvalidStateError"!==e.name&&console.error("Mic error:",e)}}else alert("Voice recognition not supported in this browser.")},className:"\n            h-16 w-16 rounded-full shadow-2xl flex items-center justify-center backdrop-blur-sm border-2\n            transition-all duration-300\n            ".concat(s?"bg-red-500/80 border-red-300 text-white animate-pulse":"bg-gradient-to-br from-emerald-500 to-teal-600 border-white/30 text-white","\n        "),children:[s?(0,a.jsx)(r,{size:28}):(0,a.jsx)(o,{size:28}),!s&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border border-white/20 animate-ping opacity-20"})]})]})}}}]);