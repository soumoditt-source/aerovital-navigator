"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{6827:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),s=n(2265),i=n(8614),l=n(5183),a=n(945),o=n(9763);let d=(0,o.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c=(0,o.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function u(e){let{lat:t,lon:n}=e,[o,u]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=async()=>{let e=await (0,a.XM)(t,n);e.spike_detected?u({detected:!0,severity:e.severity}):u(null)};e();let r=setInterval(e,3e4);return()=>clearInterval(r)},[t,n]),o)?(0,r.jsx)(i.M,{children:(0,r.jsxs)(l.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},className:"relative overflow-hidden rounded-xl border border-red-500/50 bg-red-900/40 p-4 shadow-[0_0_50px_rgba(239,68,68,0.2)]",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(220,38,38,0.1)_10px,rgba(220,38,38,0.1)_20px)] animate-[pulse_2s_infinite]"}),(0,r.jsxs)("div",{className:"relative z-10 flex items-start gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-red-500 rounded-lg animate-pulse shadow-lg shadow-red-500/50",children:(0,r.jsx)(d,{className:"text-white w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"text-red-400 font-black uppercase tracking-widest text-sm flex items-center gap-2",children:["Critical Warning",(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-ping"})]}),(0,r.jsxs)("p",{className:"text-white text-xs mt-1 font-bold",children:["Sudden AQI Spike Detected (Severity: ",o.severity.toFixed(1),"x)"]}),(0,r.jsx)("p",{className:"text-white/60 text-[10px] mt-2 font-mono",children:"Redirecting recommended. Minimize outdoor exposure immediately."})]}),(0,r.jsx)("button",{onClick:()=>u(null),className:"text-white/40 hover:text-white transition-colors",children:(0,r.jsx)(c,{size:18})})]})]})}):null}},8614:function(e,t,n){n.d(t,{M:function(){return g}});var r=n(7437),s=n(2265),i=n(8881),l=n(3576),a=n(4252),o=n(5750);class d extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c(e){let{children:t,isPresent:n}=e,i=(0,s.useId)(),l=(0,s.useRef)(null),a=(0,s.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,s.useContext)(o._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:s}=a.current;if(n||!l.current||!e||!t)return;l.current.dataset.motionPopId=i;let o=document.createElement("style");return c&&(o.nonce=c),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[n]),(0,r.jsx)(d,{isPresent:n,childRef:l,sizeRef:a,children:s.cloneElement(t,{ref:l})})}let u=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:o,custom:d,presenceAffectsLayout:u,mode:h}=e,f=(0,l.h)(p),m=(0,s.useId)(),x=(0,s.useCallback)(e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;o&&o()},[f,o]),g=(0,s.useMemo)(()=>({id:m,initial:n,isPresent:i,custom:d,onExitComplete:x,register:e=>(f.set(e,!1),()=>f.delete(e))}),u?[Math.random(),x]:[i,x]);return(0,s.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[i]),s.useEffect(()=>{i||f.size||!o||o()},[i]),"popLayout"===h&&(t=(0,r.jsx)(c,{isPresent:i,children:t})),(0,r.jsx)(a.O.Provider,{value:g,children:t})};function p(){return new Map}var h=n(9637);let f=e=>e.key||"";function m(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var x=n(1534);let g=e=>{let{children:t,custom:n,initial:a=!0,onExitComplete:o,presenceAffectsLayout:d=!0,mode:c="sync",propagate:p=!1}=e,[g,v]=(0,h.oO)(p),w=(0,s.useMemo)(()=>m(t),[t]),y=p&&!g?[]:w.map(f),j=(0,s.useRef)(!0),b=(0,s.useRef)(w),k=(0,l.h)(()=>new Map),[E,_]=(0,s.useState)(w),[C,M]=(0,s.useState)(w);(0,x.L)(()=>{j.current=!1,b.current=w;for(let e=0;e<C.length;e++){let t=f(C[e]);y.includes(t)?k.delete(t):!0!==k.get(t)&&k.set(t,!1)}},[C,y.length,y.join("-")]);let N=[];if(w!==E){let e=[...w];for(let t=0;t<C.length;t++){let n=C[t],r=f(n);y.includes(r)||(e.splice(t,0,n),N.push(n))}"wait"===c&&N.length&&(e=N),M(m(e)),_(w);return}let{forceRender:R}=(0,s.useContext)(i.p);return(0,r.jsx)(r.Fragment,{children:C.map(e=>{let t=f(e),s=(!p||!!g)&&(w===C||y.includes(t));return(0,r.jsx)(u,{isPresent:s,initial:(!j.current||!!a)&&void 0,custom:s?void 0:n,presenceAffectsLayout:d,mode:c,onExitComplete:s?void 0:()=>{if(!k.has(t))return;k.set(t,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(null==R||R(),M(b.current),p&&(null==v||v()),o&&o())},children:e},t)})})}}}]);