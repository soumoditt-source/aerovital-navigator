(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9092:function(e,t,s){Promise.resolve().then(s.bind(s,8050))},166:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var r=s(5775),n=s.n(r)},257:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var o=[],d=!1,c=-1;function u(){d&&r&&(d=!1,r.length?o=r.concat(o):c=-1,o.length&&x())}function x(){if(!d){var e=i(u);d=!0;for(var t=o.length;t;){for(r=o,o=[];++c<t;)r&&r[c].run();c=-1,t=o.length}r=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new f(e,t)),1!==o.length||d||i(x)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}},l=!0;try{t[e](a,a.exports,r),l=!1}finally{l&&delete s[e]}return a.exports}r.ab="//";var n=r(229);e.exports=n}()},5775:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=s(7043);s(7437),s(2265);let n=r._(s(5602));function a(e,t){var s;let r={loading:e=>{let{error:t,isLoading:s,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,n.default)({...a,modules:null==(s=a.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let r=s(8993);function n(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return s}},5602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=s(7437),n=s(2265),a=s(1523),l=s(49);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},s=(0,n.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(l.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(s,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(n.Suspense,{fallback:i,children:o})}return c.displayName="LoadableComponent",c}},49:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let r=s(7437),n=s(544);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,n.getExpectedRequestStore)("next/dynamic css"),a=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,r.jsx)(r.Fragment,{children:a.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},8050:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var r=s(7437),n=s(2265),a=s(166),l=s(9541);let i=s(257).env.NEXT_PUBLIC_PATHWAY_API_URL;async function o(e,t){if(!i)return{success:!1,message:"API URL not configured"};try{let s=await fetch("".concat(i,"/api/aqi/stream/start?lat=").concat(e,"&lon=").concat(t));return await s.json()}catch(e){return console.error("Error starting stream:",e),{success:!1,error:e}}}async function d(e,t,s){if(!i)return{success:!1,message:"API URL not configured"};try{let r=await fetch("".concat(i,"/api/risk/stream"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:e,lon:t,user_profile:s})});return await r.json()}catch(e){return console.error("Error getting risks:",e),{success:!1,error:e}}}async function c(e,t){if(!i)return{success:!1,message:"API URL not configured"};try{let s=await fetch("".concat(i,"/api/spike/detect?lat=").concat(e,"&lon=").concat(t));return await s.json()}catch(e){return console.error("Error detecting spike:",e),{success:!1,error:e}}}var u=s(9763);let x=(0,u.Z)("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),f=(0,u.Z)("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]),h=(0,u.Z)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),m=(0,u.Z)("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"yh07w9"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);function p(){return(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"font-bold text-lg",children:"Fitness Tracker"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Day 15 of 30"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-6",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"50%"}})}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:(0,r.jsx)(x,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:"Indoor HIIT"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Recommended (AQI High)"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"20 minutes • 4 exercises"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(f,{className:"mx-auto text-gray-400 mb-1",size:16}),(0,r.jsx)("p",{className:"font-bold",children:"7,847"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Steps"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h,{className:"mx-auto text-orange-400 mb-1",size:16}),(0,r.jsx)("p",{className:"font-bold",children:"347"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Cal"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m,{className:"mx-auto text-green-400 mb-1",size:16}),(0,r.jsx)("p",{className:"font-bold",children:"2"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Trees"})]})]}),(0,r.jsx)("button",{className:"w-full mt-6 bg-blue-600 text-white rounded-xl py-2 font-semibold hover:bg-blue-700 transition",children:"Start Workout"})]})}let b=(0,u.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),g=(0,u.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function v(e){let{lat:t,lon:s}=e,[a,l]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=async()=>{let e=await c(t,s);(null==e?void 0:e.success)&&e.spike_detected&&(l({detected:!0,severity:e.severity}),o(!0))};e();let r=setInterval(e,3e5);return()=>clearInterval(r)},[t,s]),i&&a)?(0,r.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md px-4",children:(0,r.jsxs)("div",{className:"bg-red-600 text-white p-4 rounded-xl shadow-2xl flex items-start gap-4 animate-bounce-in",children:[(0,r.jsx)(b,{className:"shrink-0 animate-pulse",size:24}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-bold text-lg",children:"POLLUTION SPIKE DETECTED!"}),(0,r.jsxs)("p",{className:"text-red-100 text-sm mt-1",children:["Sudden increase in PM2.5 levels. Severity: ",a.severity.toFixed(1),". Recommended: Stay indoors and close windows immediately."]})]}),(0,r.jsx)("button",{onClick:()=>o(!1),className:"text-red-200 hover:text-white",children:(0,r.jsx)(g,{size:20})})]})}):null}var y=s(2369);let j=(0,a.default)(()=>s.e(130).then(s.bind(s,8130)),{loadableGenerated:{webpack:()=>[8130]},ssr:!1});(0,a.default)(()=>s.e(818).then(s.bind(s,7818)),{loadableGenerated:{webpack:()=>[7818]},ssr:!1});let w=(0,a.default)(()=>s.e(319).then(s.bind(s,1319)),{loadableGenerated:{webpack:()=>[1319]},ssr:!1}),N=(0,a.default)(()=>s.e(257).then(s.bind(s,2257)),{loadableGenerated:{webpack:()=>[2257]},ssr:!1});function k(){var e,t,s,a;let i=(0,l.L)(e=>e.user),[c,u]=(0,n.useState)({lat:20.5937,lon:78.9629}),[x,f]=(0,n.useState)({start:null,end:null}),[h,m]=(0,n.useState)(null),{data:b,loading:g}=function(e,t,s){let[r,a]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),[c,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let r;async function n(){try{i(!0),await o(e,t),r=setInterval(async()=>{let r=await d(e,t,s);r.success&&(a(r.risks),i(!1))},6e4);let n=await d(e,t,s);n.success&&(a(n.risks),i(!1))}catch(e){u(e),i(!1)}}return e&&t&&n(),()=>{r&&clearInterval(r)}},[e,t]),{data:r,loading:l,error:c}}(c.lat,c.lon,{age:null==i?void 0:i.age,has_cardiovascular:null==i?void 0:null===(e=i.medicalConditions)||void 0===e?void 0:e.cardiovascular,has_respiratory:null==i?void 0:null===(t=i.medicalConditions)||void 0===t?void 0:t.respiratory,has_metabolic:null==i?void 0:null===(s=i.medicalConditions)||void 0===s?void 0:s.metabolic}),k=(e,t)=>{"start"===h?(f(s=>({...s,start:[e,t]})),m(null)):"end"===h&&(f(s=>({...s,end:[e,t]})),m(null))},T=x.start&&x.end?[{id:"1",type:"safest",exposure:980,distance:12.4,duration:38,avgAqi:142},{id:"2",type:"fastest",exposure:1420,distance:10.8,duration:32,avgAqi:201},{id:"3",type:"greenest",exposure:2850,distance:9.2,duration:25,avgAqi:387}]:[];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row h-screen overflow-hidden",children:[(0,r.jsx)(v,{lat:c.lat,lon:c.lon}),(0,r.jsxs)("aside",{className:"w-full md:w-1/4 bg-white border-r border-gray-200 overflow-y-auto p-4 flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-blue-50 rounded-xl",children:[(0,r.jsx)("div",{className:"bg-blue-200 p-3 rounded-full text-blue-700",children:(0,r.jsx)(y.Z,{size:24})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900",children:(null==i?void 0:i.name)||"Guest"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(null==i?void 0:i.age)||"--"," yrs • BMI ",(null==i?void 0:null===(a=i.bmi)||void 0===a?void 0:a.toFixed(1))||"--"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-gray-700 mb-4 uppercase text-xs tracking-wider",children:"Live Health Risks"}),g?(0,r.jsx)("div",{className:"animate-pulse space-y-4",children:(0,r.jsx)("div",{className:"h-24 bg-gray-200 rounded-full"})}):(0,r.jsx)(j,{cardiacRisk:(null==b?void 0:b.cardiac_risk)||4.2,asthmaRisk:(null==b?void 0:b.asthma_risk)||3.5,exerciseSafety:(null==b?void 0:b.exercise_safety)||65})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-gray-700 mb-4 uppercase text-xs tracking-wider",children:"Atmosphere"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[(0,r.jsx)("span",{className:"text-xs text-red-400 block",children:"AQI"}),(0,r.jsx)("span",{className:"text-xl font-bold text-red-600",children:"387"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[(0,r.jsx)("span",{className:"text-xs text-orange-400 block",children:"PM2.5"}),(0,r.jsx)("span",{className:"text-xl font-bold text-orange-600",children:"152"})]})]})]})]}),(0,r.jsxs)("main",{className:"flex-1 relative h-full flex flex-col",children:[(0,r.jsxs)("header",{className:"absolute top-4 left-4 right-4 z-[400] bg-white/90 backdrop-blur-md p-4 rounded-xl shadow-lg border border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"font-bold text-gray-800 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Navigator Active"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>m("start"),className:"px-4 py-2 rounded-lg text-sm font-bold transition ".concat("start"===h||x.start?"bg-green-100 text-green-700 ring-2 ring-green-500":"bg-gray-100 hover:bg-gray-200"),children:"Start"}),(0,r.jsx)("button",{onClick:()=>m("end"),className:"px-4 py-2 rounded-lg text-sm font-bold transition ".concat("end"===h||x.end?"bg-red-100 text-red-700 ring-2 ring-red-500":"bg-gray-100 hover:bg-gray-200"),children:"End"}),(0,r.jsx)("button",{disabled:!x.start||!x.end,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700",children:"Find Routes"})]})]}),(0,r.jsx)("div",{className:"flex-1 h-full w-full z-0",children:(0,r.jsx)(N,{onStartSet:(e,t)=>k(e,t),onEndSet:(e,t)=>k(e,t),activeSelection:h})})]}),(0,r.jsxs)("aside",{className:"w-full md:w-1/4 bg-white border-l border-gray-200 overflow-y-auto p-4 flex flex-col gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-gray-700 mb-4 uppercase text-xs tracking-wider",children:"Suggested Routes"}),x.start&&x.end?(0,r.jsx)(w,{onRouteSelect:()=>{},routes:T}):(0,r.jsx)("div",{className:"text-center p-8 text-gray-400 border-2 border-dashed border-gray-200 rounded-xl",children:(0,r.jsx)("p",{children:"Select start & end points on map"})})]}),(0,r.jsx)(p,{})]})]})}},9541:function(e,t,s){"use strict";s.d(t,{L:function(){return a}});var r=s(9625),n=s(6885);let a=(0,r.Ue)()((0,n.tJ)(e=>({user:null,setUser:t=>e({user:t}),clearUser:()=>e({user:null})}),{name:"aerovital-user"}))}},function(e){e.O(0,[762,971,117,744],function(){return e(e.s=9092)}),_N_E=e.O()}]);